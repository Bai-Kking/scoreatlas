{% extends "base.html" %}

{% block content %}
<section class="hero-panel compact">
  <div>
    <h1>成绩管理中心</h1>
    <p>支持新增、单科定向修改、删除、重置样本和数据导入导出。</p>
  </div>
</section>

<section class="manage-grid">
  <div class="stack-col">
    <article class="card form-card">
      <div class="card-head"><h2>新增学生</h2></div>
      <form id="add-form" class="form-grid">
        <label>姓名<input name="name" type="text" required maxlength="20" /></label>
        <label>语文<input name="chinese" type="number" min="0" max="150" required /></label>
        <label>数学<input name="math" type="number" min="0" max="150" required /></label>
        <label>英语<input name="english" type="number" min="0" max="150" required /></label>
        <label>物理<input name="physics" type="number" min="0" max="100" required /></label>
        <label>化学<input name="chemistry" type="number" min="0" max="100" required /></label>
        <label>生物<input name="biology" type="number" min="0" max="100" required /></label>
        <button class="btn btn-main" type="submit">确认新增</button>
      </form>
    </article>

    <article class="card form-card">
      <div class="card-head"><h2>定向改单科</h2></div>
      <form id="update-form" class="form-grid">
        <label>学生
          <select id="update-student" required></select>
        </label>
        <label>学科
          <select id="update-subject" required>
            <option value="chinese">语文</option>
            <option value="math">数学</option>
            <option value="english">英语</option>
            <option value="physics">物理</option>
            <option value="chemistry">化学</option>
            <option value="biology">生物</option>
          </select>
        </label>
        <label>新成绩<input id="update-score" type="number" min="0" max="150" required /></label>
        <button class="btn btn-main" type="submit">确认修改</button>
      </form>
    </article>

    <article class="card form-card">
      <div class="card-head"><h2>删除学生</h2></div>
      <form id="delete-form" class="form-grid">
        <label>学生
          <select id="delete-student" required></select>
        </label>
        <label class="check-label">
          <input type="checkbox" id="delete-confirm" />
          我确认要删除这条学生记录
        </label>
        <button class="btn btn-danger" type="submit">执行删除</button>
      </form>
    </article>

    <article class="card form-card">
      <div class="card-head"><h2>数据操作</h2></div>
      <div class="form-grid">
        <label>随机样本数量（10-120）
          <input id="seed-count" type="number" min="10" max="120" value="40" />
        </label>
        <button id="seed-btn" class="btn btn-warm" type="button">重置并重新生成样本</button>
        <div class="button-row">
          <a class="btn btn-ghost" href="/api/export/csv">导出 CSV</a>
          <a class="btn btn-ghost" href="/api/export/json">导出 JSON</a>
        </div>
        <label>导入 JSON 文件
          <input id="import-file" type="file" accept="application/json" />
        </label>
        <button id="import-btn" class="btn btn-main" type="button">导入并替换当前数据</button>
      </div>
    </article>
  </div>

  <article class="card table-card">
    <div class="card-head">
      <h2>当前成绩单</h2>
      <span id="manage-count" class="pill">0 条</span>
    </div>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>排名</th>
            <th>姓名</th>
            <th>语文</th>
            <th>数学</th>
            <th>英语</th>
            <th>物理</th>
            <th>化学</th>
            <th>生物</th>
            <th>总分</th>
            <th>快捷删除</th>
          </tr>
        </thead>
        <tbody id="manage-table-body"></tbody>
      </table>
    </div>
  </article>
</section>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/manage.js') }}"></script>
{% endblock %}